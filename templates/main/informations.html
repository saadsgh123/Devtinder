<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile Information</title>
    <link rel="stylesheet" href="/static/css/informations.css">
</head>
<body>
<div class="form-container">
    <h2>Enter Your Information</h2>
    <form id="profile-form" action="#" method="post" enctype="multipart/form-data">
        <fieldset>
            <legend>Personal Information</legend>

        <img src="{{ url_for('uploaded_file', filename=user.profile_pic) }}" alt="Profile Picture" class="image-placeholder">
        <label for="file-upload" class="upload-label">Choose a picture</label>
        <input type="file" id="file-upload" name="file-upload" value="{{ url_for('uploaded_file', filename=user.profile_pic) }}"  class="upload-input" accept="image/*" required>

        <label for="firstname">First name:</label>
        <input type="text" id="firstname" name="firstname" placeholder="First name" value="{% if user.firstname %} {{ user.firstname }} {% endif %}" required>

        <label for="lastname">Last name:</label>
        <input type="text" id="lastname" name="lastname" placeholder="Last name" value="{% if user.lastname %} {{ user.lastname }} {% endif %}" required>

        </fieldset>


        <fieldset>
            <legend>Work preference</legend>

        <label for="job-title">Job Title:</label>
        <select name="job-title" id="job-title">
          <option value="FullStack">FullStack </option>
          <option value="FrontEnd">Frontend </option>
          <option value="BackEnd">Backend </option>
        </select>

        <label for="country">Country:</label>
        <select id="country" name="country" required>
           <option value="">Loading countries...</option>
        </select>

        <label for="city">City:</label>
        <input type="text" id="city" name="city" placeholder="City" value="{% if user.city %} {{ user.city }} {% endif %}" required>

        <label for="bio">Bio:</label>
        <textarea id="bio" name="bio" placeholder="Enter your bio" maxlength="100">{% if user.bio %} {{ user.bio }} {% endif %}</textarea>

        <label for="small_bio">Small Bio:</label>
        <textarea id="small_bio" name="small_bio" placeholder="Enter a short bio" maxlength="100">{% if user.small_bio %} {{ user.small_bio }} {% endif %}</textarea>

        <label for="location">Location:</label>
        <select name="location" id="location">
          <option value="Onsite">Onsite </option>
          <option value="Hybrid">Hybrid </option>
          <option value="Remotely">Remotely</option>
        </select>

        </fieldset>

        <fieldset>
            <legend>Social presence</legend>

        <label for="github_url">GitHub URL:</label>
        <input type="url" id="github_url" name="github_url" placeholder="GitHub Profile URL" value="{% if user.github_url %} {{ user.github_url }} {% endif %}">

        <label for="facebook_url">Facebook URL:</label>
        <input type="url" id="facebook_url" name="facebook_url" placeholder="Facebook Profile URL" value="{% if user.facebook_url %} {{ user.facebook_url }} {% endif %}">

        <label for="linkedln">LinkedIn URL:</label>
        <input type="url" id="linkedln" name="linkedln" placeholder="LinkedIn Profile URL" value="{% if user.linkedln %} {{ user.linkedln }} {% endif %}">

        <label for="stackoverflow">Stack Overflow URL:</label>
        <input type="url" id="stackoverflow" name="stackoverflow" placeholder="Stack Overflow Profile URL" value="{% if user.stackoverflow %} {{ user.stackoverflow }} {% endif %}">

        <label for="medium_url">Medium URL:</label>
        <input type="url" id="medium_url" name="medium_url" placeholder="Medium Profile URL" value="{% if user.medium_url %} {{ user.medium_url }} {% endif %}">

        </fieldset>

        <button type="submit">Submit</button>
    </form>
</div>
<script>
    // Fetch countries using REST Countries API
    async function fetchCountries() {
        try {
            const response = await fetch('https://restcountries.com/v3.1/all');
            const countries = await response.json();

            // Sort countries alphabetically by their common name
            countries.sort((a, b) => {
                return a.name.common.localeCompare(b.name.common);
            });

            const countrySelect = document.getElementById('country');
            countrySelect.innerHTML = '';  // Clear initial options

            // Populate the select input with sorted countries
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.cca2;  // Use country code as value
                option.textContent = country.name.common;  // Use country name
                countrySelect.appendChild(option);
            });

        } catch (error) {
            console.error('Error fetching countries:', error);
        }
    }

    // Call the function to load and sort countries when the page loads
    document.addEventListener('DOMContentLoaded', fetchCountries);
</script>
</body>
</html>
